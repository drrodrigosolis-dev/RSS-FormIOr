% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/AddSections.R
\name{AddSections}
\alias{AddSections}
\title{Add Hierarchical Sections to FormIO Response Columns}
\usage{
AddSections(x)
}
\arguments{
\item{x}{A data frame (possibly with nested list-columns), or a list containing \code{FlatResponses} (a flattened data frame) or \code{submission_data} (from \code{GetResponses()} with \code{content.only = FALSE}).}
}
\value{
A list with two elements:
\item{FlatResponses}{The original flattened data frame of responses.}
\item{Sections}{A \code{tibble} with columns \code{No} (column number), \code{Names} (original column names), and \code{Level-1}, \code{Level-2}, \code{Level-3} (section assignments, filled with "General" if empty).}
}
\description{
This interactive function guides the user through categorizing columns of a flattened FormIO response dataset into hierarchical sections (up to 3 levels deep). It is designed to facilitate easier analysis by adding grouping variables to columns. The function handles input that may be a data frame, a list from \code{FlattenSubmissions()}, or raw output from \code{GetResponses()}.
If audit logging is active (see \code{\link[=StartAuditLog]{StartAuditLog()}}), this action is recorded.
}
\details{
The function first extracts or flattens the input to obtain a flat data frame of responses. It then prompts the user to:
\itemize{
\item Select the depth of sections (1, 2, or 3).
\item Provide comma-separated names for sections at each level (no spaces or special characters).
\item Assign row numbers (from the displayed column list) to each section at each level. Row numbers can be single values, comma-separated lists, or ranges (e.g., "1:5,8,10:12").
}
Empty assignments are filled with "General". The process uses console clearing (\code{\014}) and colored prompts (requires the \code{crayon} package).
}
\examples{
if (interactive()) {
  # Assuming FoodTypes is a sample dataset with possible nests
  data("FoodTypes")
  sectioned <- AddSections(FoodTypes)
  print(sectioned$Sections)
}

}
