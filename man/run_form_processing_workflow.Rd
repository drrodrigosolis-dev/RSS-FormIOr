% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/WorkflowWizard.R
\name{run_form_processing_workflow}
\alias{run_form_processing_workflow}
\title{Guided end-to-end workflow (download -> clean -> report -> export)}
\usage{
run_form_processing_workflow(
  data = NULL,
  base_url = "https://submit.digital.gov.bc.ca/app/api/v1",
  form_id = NULL,
  api_key = NULL,
  output_dir = NULL,
  overwrite = FALSE,
  plan = NULL,
  quiet = FALSE
)
}
\arguments{
\item{data}{Optional. A data.frame of responses to start from. If \code{NULL}
(default), the workflow can download responses using \code{\link[=fetch_form_responses]{fetch_form_responses()}}.}

\item{base_url}{Character. API base URL. Default:
\code{"https://submit.digital.gov.bc.ca/app/api/v1"}.}

\item{form_id}{Character. Form identifier. If \code{NULL}, uses stored credentials
or prompts via \code{\link[=ask_credentials]{ask_credentials()}}.}

\item{api_key}{Character. API key / secret. If \code{NULL}, uses stored credentials
or prompts via \code{\link[=ask_credentials]{ask_credentials()}}.}

\item{output_dir}{Folder to write output files into. If \code{NULL}, a new folder
is created under \code{tempdir()} (or you will be prompted to choose). When
downloading from FormIO, the default folder name uses the form name (when
available) plus a timestamp.}

\item{overwrite}{Logical. If \code{TRUE}, allow overwriting output files.}

\item{plan}{Optional list. For non-interactive/scripted runs you can pass a
simple plan list (created manually). If provided, the workflow runs without
prompting and the plan must include \code{output_dir} (to avoid implicit file
writes). (This is separate from the \code{workflow_plan.rds} file saved by the
interactive wizard.)}

\item{quiet}{Logical. If \code{FALSE}, prints progress messages.}
}
\value{
A list with:
\describe{
\item{data_raw}{The downloaded/raw responses (if downloaded).}
\item{flat_raw}{The fully flattened data \emph{before} any cleaning/wrangling steps.}
\item{flat}{A \code{\link[=flatten_submission_records]{flatten_submission_records()}}-style list with \code{FlatResponses}.}
\item{reports}{Named list of diagnostic tables (codebook, summaries).}
\item{files}{Named list of output file paths.}
\item{plan}{The plan that was executed (useful for reproducibility).}
}
}
\description{
This interactive helper walks you through a complete FormIOr workflow:
downloading responses, flattening and cleaning the data, generating simple
diagnostics (like a codebook and basic plots), and creating output files.
}
\details{
It is designed for non-technical users: you can accept the defaults by
pressing Enter at each prompt.

Audit logging:
\itemize{
\item If you start an audit log (see \code{\link[=start_audit_log]{start_audit_log()}}), each step is recorded.
\item If you do not start a log, FormIOr will ask once per session whether you
want to begin logging.
}

Output folder naming:
\itemize{
\item When downloading from FormIO and you don't supply \code{output_dir}, the workflow
will try to fetch basic form metadata first so it can suggest a folder name
based on the form name. This may prompt for credentials a bit earlier than
the download step. The default base directory is \code{tempdir()} unless you
choose a different location.
}

Output files:
\itemize{
\item The export workbook includes a \code{FlattenedRaw} sheet (the flattened data
before any cleaning) and, when available, an \code{AuditLog} sheet.
\item Plots are saved as \code{.png} files under \code{output_dir/plots} and are listed in
a \code{Plots} sheet.
\item The workflow also saves your wizard choices to \code{workflow_plan.rds} and
\code{workflow_plan.json} inside the output folder, so you can repeat the same
steps later.
}

Repeatable sessions:
\itemize{
\item When you run \code{\link[=run_form_processing_workflow]{run_form_processing_workflow()}} again, it looks for a previous
\code{workflow_plan.rds/json} and asks whether you want to reuse it.
\item You can reuse a previous session in two ways:
\enumerate{
\item Apply automatically (no prompts; uses saved answers where available)
\item Use as defaults (prompts still appear, but you can press Enter to accept)
}
}
}
\section{CHEF credentials and base URL}{

FormIOr is designed for the BC Public Service CHEF FormIO service.
The default base URL is \verb{https://submit.digital.gov.bc.ca/app/api/v1}.
If you use a different FormIO service, you must override \code{base_url} and
compatibility is not guaranteed.
Note (CHEF): Response export endpoints use \verb{/app/api/v1}, while some
metadata/schema endpoints live at \verb{/api/v1}. FormIOr automatically retries
the alternate base for metadata/schema requests when needed.

For CHEF users, generate your API key from the form's \strong{Manage} page.
The Form ID is the final alphanumeric code after the \code{=} sign in the
Manage page URL.
}

\examples{
\dontrun{
# Fully guided interactive run
out <- run_form_processing_workflow()

# Start from an existing data.frame (skip download)
out <- run_form_processing_workflow(data = FoodTypes)
}
}
