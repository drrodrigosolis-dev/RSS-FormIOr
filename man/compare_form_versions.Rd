% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/MetadataDocs.R
\name{compare_form_versions}
\alias{compare_form_versions}
\title{Compare two versions of a form}
\usage{
compare_form_versions(
  old,
  new,
  by = c("key", "path"),
  include = c("input", "all"),
  old_version = "latest",
  new_version = "latest",
  compare_cols = c("label", "type", "required", "description", "default", "options",
    "section"),
  include_unchanged = FALSE,
  quiet = FALSE
)
}
\arguments{
\item{old}{Form schema list, JSON string, or path to a JSON file (older version).}

\item{new}{Form schema list, JSON string, or path to a JSON file (newer version).}

\item{by}{How to match fields across versions: \code{"key"} (default) or \code{"path"}.}

\item{include}{Which components to include: \code{"input"} (default) or \code{"all"}.}

\item{old_version}{Which form version to use when \code{old} is metadata (from
\code{\link[=fetch_form_metadata]{fetch_form_metadata()}}). Use \code{"latest"} (default), a version number, or a
version ID.}

\item{new_version}{Which form version to use when \code{new} is metadata (from
\code{\link[=fetch_form_metadata]{fetch_form_metadata()}}). Use \code{"latest"} (default), a version number, or a
version ID.}

\item{compare_cols}{Character vector of columns to compare for changes.}

\item{include_unchanged}{Logical. If \code{TRUE}, include unchanged fields in the output.}

\item{quiet}{Logical. If \code{FALSE}, prints a short summary.}
}
\value{
A list with:
\describe{
\item{summary}{Counts of added, removed, changed, and unchanged fields}
\item{added}{Fields only in the new version}
\item{removed}{Fields only in the old version}
\item{changed}{Fields that changed (with before/after values)}
\item{unchanged}{Unchanged fields (if \code{include_unchanged = TRUE})}
}
}
\description{
Shows what changed between two form versions:
fields added, removed, or updated.
If audit logging is active (see \code{\link[=start_audit_log]{start_audit_log()}}), this action is recorded.
}
\details{
If you pass the output of \code{\link[=fetch_form_metadata]{fetch_form_metadata()}}, the schema is \strong{not} included
in that object. In that case the function will automatically fetch the schema
using stored credentials (from \code{\link[=ask_credentials]{ask_credentials()}} or \code{fetch_form_metadata()}). If
credentials are not available, it will stop with a clear message.

Tip: Use \code{by = "key"} for stable field keys, or \code{by = "path"} when keys are
reused in repeating sections.
}
\examples{
old <- list(components = list(
  list(type = "textfield", key = "name", label = "Name", input = TRUE)
))
new <- list(components = list(
  list(type = "textfield", key = "name", label = "Full name", input = TRUE),
  list(type = "number", key = "age", label = "Age", input = TRUE)
))
compare_form_versions(old, new)

\dontrun{
old_meta <- fetch_form_metadata(form_id = "123", api_key = "abc")
new_meta <- fetch_form_metadata(form_id = "123", api_key = "abc")
compare_form_versions(old_meta, new_meta)
}
}
