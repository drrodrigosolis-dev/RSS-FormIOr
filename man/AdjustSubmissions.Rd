% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/AdjustSubmissions.R
\name{AdjustSubmissions}
\alias{AdjustSubmissions}
\title{Adjust submissions by ID (delete or edit specific values)}
\usage{
AdjustSubmissions(
  x,
  id_col = 1,
  delete_ids = NULL,
  updates = NULL,
  return_flat = FALSE,
  quiet = FALSE
)
}
\arguments{
\item{x}{A data frame of responses, or a list from \code{\link[=FlattenSubmissions]{FlattenSubmissions()}}.}

\item{id_col}{Integer or character. Submission ID column (default 1).}

\item{delete_ids}{Optional character vector of submission IDs to delete.}

\item{updates}{Optional updates to apply. Supported formats:
\itemize{
\item A data.frame with columns \code{id}, \code{column}, \code{value}
\item A data.frame with columns \code{submissionId}/\code{submission_id}, \code{column}, \code{value}
\item A list of lists, each with elements \code{id}, \code{column}, \code{value}
}

Values are coerced to the target column type when possible. Use \code{"NA"} (or
an actual \code{NA}) to set a value to missing.}

\item{return_flat}{Logical. If \code{TRUE} and \code{x} came from \code{\link[=FlattenSubmissions]{FlattenSubmissions()}},
include the updated list as \code{flat} in the output.}

\item{quiet}{Logical. If \code{FALSE}, prints a short summary.}
}
\value{
A list with:
\describe{
\item{data}{Updated data frame}
\item{summary}{Data frame summarizing deletions/updates}
\item{changes}{Data frame listing each requested update and its status}
\item{flat}{If \code{return_flat = TRUE} and \code{x} was a FlattenSubmissions list, the updated list}
}
}
\description{
Sometimes you need to make small, targeted fixes before you export:
remove test submissions, correct a value for one submission, or blank out
a field for privacy reasons.
}
\details{
This helper lets you:
\itemize{
\item Delete submission(s) by ID (remove rows)
\item Update one or more column values for specific submission ID(s)
}

It works on either a plain data frame or the list produced by
\code{\link[=FlattenSubmissions]{FlattenSubmissions()}}. If audit logging is active (see \code{\link[=StartAuditLog]{StartAuditLog()}}),
this action is recorded.
}
\examples{
df <- data.frame(
  submissionId = c("a", "b", "c"),
  status = c("ok", "test", "ok"),
  stringsAsFactors = FALSE
)

# Delete one submission and update a value
out <- AdjustSubmissions(
  df,
  id_col = "submissionId",
  delete_ids = "b",
  updates = data.frame(id = "c", column = "status", value = "review", stringsAsFactors = FALSE),
  quiet = TRUE
)
out$data
}
